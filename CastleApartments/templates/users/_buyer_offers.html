{% load static %}
{% block scripts %}
<script defer src="{% static 'js/payment_option_select.js' %}"></script>
<script defer src="{% static 'js/buyer_offers.js' %}"></script>
{% endblock %}
<div class="d-flex justify-content-center align-items-center">
<form id="temp-input-form">
    {% include "payments/_entry_payment_modal.html" %}
    {% include "payments/_payment_option_modal.html" %}
</form>
{% include "payments/_information_overview_modal.html" %}
{% include "payments/_confirmation_modal.html" %}
{% include "_delete_item_modal.html" with item="offer" title="Eyða tilboði" %}
<table class="table table-bordered table-striped table-hover justify-content-center mt-1">
    <thead>
        <tr class="text-center">
            <th style="width:10%;" scope="col">Seljandi</th>
            <th style="width:35%;" scope="col">Heimilisfang</th>
            <th style="width:10%;" scope="col">Dags. tilboðs</th>
            <th style="width:10%;" scope="col">Gildistími</th>
            <th style="width:10%;" scope="col">Tilboð</th>
            <th style="width:10%" scope="col"></th>
            <td class="offer-button-cell" scope="col">Staða</th>
        </tr>
    </thead>
    <tbody class="table-group-divider" style="border-top-color: black;">
    {% for offer in offers %}
        <tr id="offer-id-{{ offer.id }}-row"
        {% if offer.status == "Accepted" %}
        class="table-success"
        {% elif offer.status == "Declined" %}
        class="table-danger"
        {% elif offer.status == "Contingent" %}
        class="table-info"
        {% endif %}
        >

            <th class="align-middle text-center" scope="row">{{ offer.property.seller.user.full_name }}</th>
            <td class="d-flex align-middle text-start align-items-center justify-content-between" scope="row">
                <h4 class="px-3">{{ offer.property.street_name }} - {{ offer.property.postal_code }} {{ offer.property.city }}</h4>
                <a class="px-2" href="{% url 'real-estate-by-id' id=offer.property.id %}">
                    <button class="btn btn-primary mx-2" href="{% url 'real-estate-by-id' id=offer.property.id %}">Skoða</button>
                </a>
                
            </td>
            <td class="align-middle text-center" scope="row">{{ offer.offer_date }}</td>
            <td class="align-middle text-center" scope="row">{{ offer.offer_expiry }}</td>
            <td class="align-middle text-end" scope="row"><h4 class="mx-3">{{ offer.offer_amount }}</h4></td>
            <td class="offer-button-cell justify-content-center" scope="row">

                <button name="offer-accepted-button" class="btn btn-success bigger-btn" data-bs-toggle="modal" data-bs-target="#contact-info-modal" 
                data-button-status="ACCEPTED"
                data-offer-status="{{ offer.offer_status }}"

                data-id="{{ offer.id }}"
                data-street-name="{{ offer.property.street_name }}"
                data-offer-amount="{{ offer.offer_amount }}"
                data-zip="{{ offer.property.postal_code }}"
                data-city="{{ offer.property.city }}"
                data-type="{{ offer.property.property_type }}"
                data-image="{{ offer.property.image }}"
                data-listing-price="{{ offer.property.listing_price }}">Afgreiða</button>
                {% if offer.offer_status == "Accepted" %}

                {% elif offer.offer_status == "Contingent" %}
                <button class="btn btn-primary bigger-btn" 
                data-button-status="CONTINGENT" 
                data-offer-status="{{ offer.offer_status }}" 
                data-id="{{ offer.id }}">Skoða</button>
                <!-- data-offer-message="{{ offer.offer_message }}"  VANTAR FYRIR CONTINGENCY -->
                {% endif %}
                <button name="delete-offer" class="btn btn-danger" data-id="{{ offer.id }}" data-bs-toggle="modal" data-bs-target="#delete-offer-modal">Eyða</button>
                
            </td>

            <td class="align-middle text-center" scope="row"><h4><b>{{ offer.offer_status }}</b></h4></td>

        </tr>
        {% empty %}
    </tbody>
</table>
</div>
<div class="py-5" style="min-height: 50vh;">
    <h1 class="text-center subtext">Engin virk tilboð..</h1>
</div>
        {% endfor %}
    </tbody>
</table>
</div>